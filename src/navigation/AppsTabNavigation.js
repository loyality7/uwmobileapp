import React from 'react';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import { View, StyleSheet, TouchableOpacity } from 'react-native';
import { SvgXml } from 'react-native-svg';
import { useNavigation, useRoute, getFocusedRouteNameFromRoute } from '@react-navigation/native';
import ServicesScreen from '../screens/apps/Apps';
import Ecommerce from '../screens/Ecommerce/Ecommerce';
import BrainBox from '../screens/Hub/BrainBox/BrainBox';
import Profile from '../screens/Profile';
import Cart from '../screens/Cart/Cart';
import Wishlist from '../screens/Cart/Wishlist';

const Tab = createBottomTabNavigator();

const icons = {
  Apps: {
    active: `<svg width="23" height="26" viewBox="0 0 23 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.6239 3.0278C12.7529 2.61725 13.7793 2.25802 14.8056 1.95011C15.0109 1.89879 15.3188 2.05274 15.5754 2.10406C15.5241 2.36065 15.4728 2.61725 15.3701 2.87384C15.2675 3.28439 15.1136 3.69494 14.9083 4.31076C16.1912 4.31076 17.2176 4.31076 18.2953 4.31076C19.6296 4.31076 19.9375 4.61867 19.9888 5.95295C19.9888 6.26086 20.0401 6.51746 19.9888 6.82537C19.8862 7.49251 20.1941 7.95438 20.7073 8.41624C22.8627 10.3663 22.8113 13.9586 20.656 16.114C20.348 16.4219 20.0915 16.8325 20.0401 17.243C19.5783 21.7591 15.6781 25.3 11.1107 25.3C6.49204 25.3 2.59183 21.7591 2.07864 17.0891C2.02732 16.7298 1.82205 16.268 1.56546 16.0114C-0.487286 13.9073 -0.538604 10.5203 1.51414 8.41624C1.82205 8.10833 1.92469 7.59515 2.02732 7.1846C2.12996 6.67141 2.02732 6.10691 2.02732 5.59372C2.02732 4.72131 2.43787 4.31076 3.31029 4.25944C4.28534 4.25944 5.31171 4.25944 6.28676 4.25944C6.69731 4.25944 6.9539 4.1568 7.10786 3.74625C8.03159 1.28296 9.77643 0.0513186 12.3937 0C12.6503 0 12.9582 0.153956 13.2148 0.256593C13.1121 0.513186 13.0095 0.71846 12.8555 0.975053C12.4963 1.69351 12.0344 2.36065 11.6239 3.0278ZM3.00238 17.0891C3.15633 21.1432 7.05654 24.5816 11.2647 24.4276C15.3188 24.325 19.1677 20.7327 19.1164 17.1404C14.3438 17.7562 12.8555 16.7812 11.7265 12.2138C11.3673 12.2138 10.9568 12.2138 10.5975 12.2138C9.4172 16.7298 7.46709 18.0128 3.00238 17.0891ZM3.00238 7.38987C3.20765 7.33855 3.36161 7.28723 3.56688 7.23592C6.54336 6.31218 9.36588 7.7491 10.2896 10.7256C10.4436 11.2901 10.7515 11.2901 11.2133 11.3414C11.6752 11.3414 11.9831 11.2901 12.1371 10.7256C12.7529 8.67284 14.1898 7.44119 16.2939 7.08196C17.2176 6.92801 18.1927 7.03064 19.1677 7.03064C19.1677 6.77405 19.1677 6.3635 19.1677 5.95295C19.219 5.38845 18.9624 5.13186 18.3979 5.18317C17.7821 5.23449 17.1663 5.18317 16.5505 5.18317C14.2925 5.18317 14.2925 5.18317 14.2925 2.92516C13.2661 3.18175 12.5476 3.74625 11.9831 4.61867C11.8292 4.82394 11.5726 4.92658 11.3673 5.13186C11.2133 4.87526 10.9568 4.61867 10.9568 4.4134C11.0594 3.28439 11.2647 2.15538 11.4186 1.07769C9.77643 1.12901 8.23687 2.41197 7.87764 4.36208C7.775 4.9779 7.51841 5.18317 6.90259 5.13186C6.18413 5.08054 5.46567 5.13186 4.79852 5.13186C2.7971 5.13186 2.7971 5.13186 2.95106 7.1846C2.89974 7.23592 2.95106 7.28724 3.00238 7.38987ZM0.846997 12.1625C0.846997 14.6771 2.69446 16.5759 5.20907 16.5759C7.62105 16.5759 9.57115 14.6258 9.62247 12.2138C9.67379 9.75053 7.82632 7.85174 5.31171 7.80042C2.89974 7.7491 0.846997 9.75053 0.846997 12.1625ZM21.4771 12.2138C21.4771 9.64789 19.6809 7.80042 17.115 7.80042C14.703 7.80042 12.7529 9.75053 12.7016 12.1625C12.7016 14.7284 14.4977 16.5759 17.0637 16.5759C19.527 16.5759 21.4771 14.6771 21.4771 12.2138Z" fill="#007AFF"/>
<path d="M11.0593 21.2973C9.46847 21.2973 7.92891 20.2196 7.51836 18.7314C7.41573 18.4748 7.621 18.1156 7.621 17.859C7.82627 18.0643 8.1855 18.2182 8.28814 18.4235C9.16056 20.4249 11.3673 21.0921 12.9581 19.7065C13.3687 19.3472 13.6253 18.7314 13.9332 18.2695C14.0871 18.0643 14.3437 17.9103 14.549 17.7563C14.6003 18.0129 14.8056 18.3209 14.7543 18.5774C14.395 20.117 12.7529 21.3486 11.0593 21.2973Z" fill="#007AFF"/>
<path d="M5.46561 10.1611C5.46561 11.4954 5.87616 11.8033 7.15912 11.5467C7.51835 12.5731 7.26176 13.3942 6.44066 14.01C5.7222 14.5232 4.69583 14.5232 3.97737 13.9587C3.20759 13.3942 2.89968 12.4705 3.20759 11.5467C3.56682 10.5717 4.28528 10.1611 5.46561 10.1611Z" fill="#007AFF"/>
<path d="M17.3203 10.1611C17.3716 11.5467 17.7821 11.8546 19.0138 11.5467C19.373 12.4705 19.1677 13.2916 18.4493 13.8561C17.7308 14.4719 16.7044 14.5232 15.9347 14.01C15.1649 13.4968 14.8057 12.5218 15.0622 11.6494C15.3702 10.623 16.0886 10.1611 17.3203 10.1611Z" fill="#007AFF"/>
</svg>`,
    inactive: `<svg width="23" height="26" viewBox="0 0 23 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.6239 3.0278C12.7529 2.61725 13.7793 2.25802 14.8056 1.95011C15.0109 1.89879 15.3188 2.05274 15.5754 2.10406C15.5241 2.36065 15.4728 2.61725 15.3701 2.87384C15.2675 3.28439 15.1136 3.69494 14.9083 4.31076C16.1912 4.31076 17.2176 4.31076 18.2953 4.31076C19.6296 4.31076 19.9375 4.61867 19.9888 5.95295C19.9888 6.26086 20.0401 6.51746 19.9888 6.82537C19.8862 7.49251 20.1941 7.95438 20.7073 8.41624C22.8627 10.3663 22.8113 13.9586 20.656 16.114C20.348 16.4219 20.0915 16.8325 20.0401 17.243C19.5783 21.7591 15.6781 25.3 11.1107 25.3C6.49204 25.3 2.59183 21.7591 2.07864 17.0891C2.02732 16.7298 1.82205 16.268 1.56546 16.0114C-0.487286 13.9073 -0.538604 10.5203 1.51414 8.41624C1.82205 8.10833 1.92469 7.59515 2.02732 7.1846C2.12996 6.67141 2.02732 6.10691 2.02732 5.59372C2.02732 4.72131 2.43787 4.31076 3.31029 4.25944C4.28534 4.25944 5.31171 4.25944 6.28676 4.25944C6.69731 4.25944 6.9539 4.1568 7.10786 3.74625C8.03159 1.28296 9.77643 0.0513186 12.3937 0C12.6503 0 12.9582 0.153956 13.2148 0.256593C13.1121 0.513186 13.0095 0.71846 12.8555 0.975053C12.4963 1.69351 12.0344 2.36065 11.6239 3.0278ZM3.00238 17.0891C3.15633 21.1432 7.05654 24.5816 11.2647 24.4276C15.3188 24.325 19.1677 20.7327 19.1164 17.1404C14.3438 17.7562 12.8555 16.7812 11.7265 12.2138C11.3673 12.2138 10.9568 12.2138 10.5975 12.2138C9.4172 16.7298 7.46709 18.0128 3.00238 17.0891ZM3.00238 7.38987C3.20765 7.33855 3.36161 7.28723 3.56688 7.23592C6.54336 6.31218 9.36588 7.7491 10.2896 10.7256C10.4436 11.2901 10.7515 11.2901 11.2133 11.3414C11.6752 11.3414 11.9831 11.2901 12.1371 10.7256C12.7529 8.67284 14.1898 7.44119 16.2939 7.08196C17.2176 6.92801 18.1927 7.03064 19.1677 7.03064C19.1677 6.77405 19.1677 6.3635 19.1677 5.95295C19.219 5.38845 18.9624 5.13186 18.3979 5.18317C17.7821 5.23449 17.1663 5.18317 16.5505 5.18317C14.2925 5.18317 14.2925 5.18317 14.2925 2.92516C13.2661 3.18175 12.5476 3.74625 11.9831 4.61867C11.8292 4.82394 11.5726 4.92658 11.3673 5.13186C11.2133 4.87526 10.9568 4.61867 10.9568 4.4134C11.0594 3.28439 11.2647 2.15538 11.4186 1.07769C9.77643 1.12901 8.23687 2.41197 7.87764 4.36208C7.775 4.9779 7.51841 5.18317 6.90259 5.13186C6.18413 5.08054 5.46567 5.13186 4.79852 5.13186C2.7971 5.13186 2.7971 5.13186 2.95106 7.1846C2.89974 7.23592 2.95106 7.28724 3.00238 7.38987ZM0.846997 12.1625C0.846997 14.6771 2.69446 16.5759 5.20907 16.5759C7.62105 16.5759 9.57115 14.6258 9.62247 12.2138C9.67379 9.75053 7.82632 7.85174 5.31171 7.80042C2.89974 7.7491 0.846997 9.75053 0.846997 12.1625ZM21.4771 12.2138C21.4771 9.64789 19.6809 7.80042 17.115 7.80042C14.703 7.80042 12.7529 9.75053 12.7016 12.1625C12.7016 14.7284 14.4977 16.5759 17.0637 16.5759C19.527 16.5759 21.4771 14.6771 21.4771 12.2138Z" fill="#999999"/>
<path d="M11.0594 21.2973C9.46853 21.2973 7.92897 20.2196 7.51842 18.7314C7.41579 18.4748 7.62106 18.1156 7.62106 17.859C7.82633 18.0643 8.18556 18.2182 8.2882 18.4235C9.16062 20.4249 11.3673 21.0921 12.9582 19.7065C13.3687 19.3472 13.6253 18.7314 13.9332 18.2695C14.0872 18.0643 14.3438 17.9103 14.5491 17.7563C14.6004 18.0129 14.8057 18.3209 14.7543 18.5774C14.3951 20.117 12.7529 21.3486 11.0594 21.2973Z" fill="#999999"/>
<path d="M5.46567 10.1611C5.46567 11.4954 5.87622 11.8033 7.15918 11.5467C7.51841 12.5731 7.26182 13.3942 6.44072 14.01C5.72226 14.5232 4.69589 14.5232 3.97743 13.9587C3.20765 13.3942 2.89974 12.4705 3.20765 11.5467C3.56688 10.5717 4.28534 10.1611 5.46567 10.1611Z" fill="#999999"/>
<path d="M17.3203 10.1611C17.3716 11.5467 17.7821 11.8546 19.0138 11.5467C19.373 12.4705 19.1677 13.2916 18.4493 13.8561C17.7308 14.4719 16.7044 14.5232 15.9347 14.01C15.1649 13.4968 14.8057 12.5218 15.0622 11.6494C15.3702 10.623 16.0886 10.1611 17.3203 10.1611Z" fill="#999999"/>
</svg>`
  },
  Shop: {
    active: `<svg width="22" height="26" viewBox="0 0 22 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.95844 0C9.24823 0.0724475 9.5512 0.11855 9.8344 0.210756C11.8498 0.862784 13.0748 2.68056 12.9957 4.88033L13.0023 4.87374C12.7191 4.87374 12.4359 4.87374 12.1593 4.87374L12.1659 4.88033C12.1527 4.59712 12.1593 4.30733 12.1198 4.02413C11.8959 2.31832 10.5128 1.02085 8.76086 0.849611C7.11433 0.691544 5.48096 1.75191 4.98042 3.35893C4.82894 3.8463 4.82894 4.37319 4.76307 4.88691L4.76966 4.88033C4.48646 4.88033 4.20325 4.88033 3.92664 4.88033L3.93322 4.88691C3.88053 2.83204 4.7499 1.32381 6.59402 0.414926C7.02212 0.20417 7.50949 0.131723 7.97052 0C8.29983 0 8.62914 0 8.95844 0Z" fill="#007AFF"/>
<path d="M6.19223 9.24683C11.0001 9.24683 15.7882 9.24683 20.6027 9.24683C20.6488 9.76713 20.6949 10.2808 20.7344 10.7946C20.8925 12.6848 21.0506 14.575 21.2152 16.4652C21.3535 18.1184 21.4918 19.7715 21.6301 21.4246C21.7026 22.3071 21.775 23.1897 21.8607 24.0722C21.9331 24.8362 21.584 25.238 20.8135 25.238C15.8673 25.238 10.9211 25.238 5.97489 25.238C5.20431 25.238 4.86183 24.8428 4.9277 24.0722C5.09235 22.1557 5.25042 20.2457 5.41507 18.3291C5.60607 16.0898 5.79707 13.8439 5.98806 11.6047C6.04734 10.9263 6.10003 10.2479 6.15272 9.56955C6.1593 9.46417 6.17906 9.35879 6.19223 9.24683ZM8.85962 12.3555C8.87279 12.3555 8.88596 12.3555 8.90572 12.3555C8.90572 12.9614 8.84645 13.5739 8.91889 14.1733C9.156 16.3006 11.033 18.0196 13.1406 18.092C15.4392 18.171 17.4282 16.6628 17.8299 14.4894C18.0604 13.2644 17.9024 12.013 17.9221 10.7748C17.9287 10.5245 17.6916 10.3599 17.4414 10.3994C17.2174 10.4323 17.0923 10.6036 17.0923 10.8868C17.0923 11.8088 17.1055 12.7243 17.0857 13.6464C17.0594 15.5432 15.505 17.1634 13.6477 17.2556C11.4348 17.3609 9.70264 15.7144 9.69606 13.5015C9.69606 12.6321 9.69606 11.7627 9.69606 10.8868C9.69606 10.5772 9.5314 10.3928 9.26796 10.3994C9.0111 10.406 8.85962 10.5772 8.85962 10.8802C8.85303 11.3741 8.85962 11.8615 8.85962 12.3555Z" fill="#007AFF"/>
<path d="M12.9957 4.88696C13.8651 4.88696 14.7345 4.88696 15.6302 4.88696C15.6302 6.0527 15.6302 7.21186 15.6302 8.39737C15.5182 8.39737 15.4128 8.39737 15.3074 8.39737C12.212 8.39737 9.11648 8.39737 6.02099 8.39737C5.50069 8.39737 5.40848 8.49616 5.36238 9.02964C5.2109 10.8869 5.04624 12.7442 4.89476 14.6015C4.75645 16.2546 4.61815 17.9077 4.47984 19.5609C4.44691 19.9956 4.40739 20.4236 4.36787 20.8781C4.26908 20.8847 4.18346 20.8913 4.09126 20.8913C3.0704 20.8913 2.05614 20.8913 1.03529 20.8913C0.291055 20.8913 -0.0580108 20.4895 0.00785054 19.7519C0.172504 17.8485 0.330571 15.9385 0.488638 14.0351C0.659878 11.9802 0.837704 9.93194 1.00894 7.87706C1.08139 7.00111 1.15384 6.12515 1.22629 5.24919C1.23287 5.13723 1.25263 5.02527 1.2658 4.90013C2.1681 4.90013 3.05065 4.90013 3.93977 4.90013L3.93319 4.89354C3.93319 5.39409 3.93319 5.89464 3.93977 6.39518C3.93977 6.70473 4.10443 6.88256 4.37446 6.87597C4.63132 6.86938 4.77621 6.69814 4.7828 6.39518C4.78939 5.89464 4.7828 5.39409 4.7828 4.89354L4.76304 4.88696C7.23284 4.88696 9.69606 4.88696 12.1659 4.88696L12.1593 4.88037C12.1593 5.37433 12.1593 5.86829 12.1659 6.35567C12.1659 6.67839 12.3108 6.85621 12.5742 6.8628C12.8508 6.86938 13.0023 6.69156 13.0089 6.35567C13.0089 5.86171 13.0089 5.36775 13.0089 4.88037C13.0023 4.88037 12.9957 4.88696 12.9957 4.88696Z" fill="#007AFF"/>
</svg>`,
    inactive: `<svg width="24" height="27" viewBox="0 0 24 27" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M10.093 1C10.4387 1.08481 10.7976 1.14353 11.1238 1.26748C12.7482 1.87422 13.8051 3.35517 13.8638 5.09708C13.8704 5.23408 13.8638 5.37109 13.8638 5.53419C13.9878 5.53419 14.0726 5.53419 14.1574 5.53419C14.9599 5.53419 15.7688 5.53419 16.5713 5.53419C16.9823 5.53419 17.1063 5.65162 17.1063 6.07568C17.1063 7.13909 17.1063 8.20903 17.1063 9.27244C17.1063 9.36378 17.1063 9.44859 17.1063 9.57907C17.2172 9.57907 17.3085 9.57907 17.3999 9.57907C18.6394 9.57907 19.8724 9.57907 21.112 9.57907C21.5491 9.57907 21.6535 9.65736 21.6861 10.0879C21.8101 11.5167 21.9275 12.9389 22.0449 14.3677C22.1885 16.0378 22.3255 17.708 22.469 19.3781C22.606 20.983 22.7495 22.5879 22.867 24.1929C22.9453 25.2693 22.2407 26 21.1642 26C16.5322 26 11.9001 26 7.27459 26C6.21118 26 5.51311 25.2758 5.58487 24.2124C5.63054 23.4687 5.7023 22.7249 5.76754 21.9486C5.66316 21.9486 5.57182 21.9486 5.48701 21.9486C4.5606 21.9486 3.63419 21.9486 2.70126 21.9486C1.63785 21.9486 0.933253 21.2179 1.00502 20.161C1.1094 18.7323 1.23988 17.31 1.36384 15.8813C1.48779 14.4199 1.61175 12.965 1.73571 11.5037C1.87923 9.84003 2.01624 8.18293 2.15977 6.51931C2.17281 6.34969 2.17934 6.18006 2.19891 6.01044C2.24458 5.62552 2.34244 5.53419 2.72736 5.53419C3.52981 5.53419 4.33879 5.53419 5.14124 5.53419C5.23257 5.53419 5.31739 5.53419 5.41525 5.53419C5.44134 5.22103 5.44134 4.92093 5.48701 4.62735C5.74797 2.76801 7.20935 1.30663 9.07522 1.04567C9.12088 1.03914 9.16655 1.01957 9.21222 1C9.5058 1 9.79938 1 10.093 1ZM7.5486 10.375C7.53555 10.4533 7.5225 10.5055 7.51598 10.5642C7.41159 11.7972 7.31373 13.0303 7.20935 14.2633C7.07234 15.8943 6.93534 17.5188 6.79834 19.1498C6.65481 20.8591 6.51128 22.5684 6.37428 24.2777C6.32861 24.8583 6.6809 25.2236 7.26154 25.2236C11.9132 25.2236 16.5713 25.2236 21.2229 25.2236C21.7905 25.2236 22.1298 24.8648 22.1037 24.2907C22.0841 23.9188 22.0384 23.547 22.0123 23.1751C21.8753 21.5376 21.7383 19.9001 21.6013 18.2625C21.4447 16.3901 21.2882 14.5177 21.1251 12.6454C21.0598 11.8951 20.9946 11.1448 20.9293 10.3815C16.4669 10.375 12.0175 10.375 7.5486 10.375ZM2.96222 6.32359C2.81217 8.07203 2.66864 9.80089 2.52511 11.5297C2.40115 12.9977 2.2772 14.4656 2.15324 15.9335C2.03581 17.3492 1.91185 18.7714 1.80095 20.1871C1.74875 20.8265 2.09453 21.1722 2.7404 21.1722C3.64072 21.1722 4.54755 21.1722 5.44787 21.1722C5.57835 21.1722 5.7023 21.1722 5.84583 21.1722C5.87845 20.7743 5.91107 20.4024 5.94369 20.0305C6.0807 18.393 6.2177 16.7555 6.3547 15.118C6.49171 13.4674 6.63524 11.8103 6.77224 10.1597C6.81138 9.67041 6.8962 9.5856 7.3855 9.5856C10.2626 9.5856 13.1462 9.5856 16.0233 9.5856C16.1146 9.5856 16.2125 9.5856 16.3169 9.5856C16.3169 8.48304 16.3169 7.4131 16.3169 6.33011C15.5014 6.33011 14.6989 6.33011 13.8704 6.33011C13.8704 6.42145 13.8704 6.49974 13.8704 6.58455C13.8704 6.97599 13.8769 7.36743 13.8638 7.75887C13.8573 8.01331 13.6942 8.16989 13.4724 8.16989C13.2636 8.16336 13.1071 8.00679 13.0875 7.77192C13.081 7.64796 13.081 7.53053 13.081 7.40658C13.081 7.05428 13.081 6.69546 13.081 6.33664C10.778 6.33664 8.51415 6.33664 6.22422 6.33664C6.22422 6.4345 6.22422 6.52584 6.22422 6.61065C6.22422 6.99556 6.23075 7.37396 6.22422 7.75887C6.2177 8.00026 6.04808 8.16989 5.83278 8.16989C5.61097 8.16989 5.46091 8.00026 5.44787 7.75235C5.44134 7.66101 5.44787 7.5762 5.44787 7.48486C5.44787 7.10647 5.44787 6.72808 5.44787 6.33664C4.60627 6.32359 3.79729 6.32359 2.96222 6.32359ZM13.0549 5.52114C13.218 4.4251 12.6699 3.11378 11.5935 2.38309C10.4453 1.60021 8.93821 1.58716 7.77694 2.34395C6.57652 3.13335 6.10027 4.52296 6.25684 5.52114C8.5272 5.52114 10.791 5.52114 13.0549 5.52114Z" fill="#999999" stroke="#999999" stroke-width="0.3"/>
<path d="M10.0277 13.3173C10.0277 12.8476 10.0277 12.3713 10.0277 11.9016C10.0277 11.6015 10.1713 11.4384 10.4127 11.4384C10.654 11.4384 10.8041 11.6015 10.8041 11.8951C10.8106 12.7171 10.7976 13.5391 10.8106 14.3611C10.8302 16.1031 11.998 17.4666 13.7138 17.7667C15.6841 18.1124 17.6152 16.5336 17.6608 14.5373C17.6804 13.6826 17.6673 12.828 17.6673 11.9734C17.6673 11.882 17.6674 11.7907 17.6934 11.7059C17.7522 11.5102 17.8957 11.4188 18.1045 11.4384C18.3002 11.458 18.4437 11.5754 18.4372 11.7646C18.4176 12.9389 18.5742 14.1328 18.3393 15.2941C17.9414 17.2643 16.1342 18.6344 14.0661 18.5822C12.1089 18.53 10.3866 17.036 10.093 15.0853C10.0016 14.5047 10.0212 13.9045 9.99512 13.3108C10.0082 13.3173 10.0147 13.3173 10.0277 13.3173Z" fill="#999999" stroke="#999999" stroke-width="0.3"/>
</svg>`
  },
  Cart: {
    active: `<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.54577 6.11038C11.7395 6.11038 14.9041 6.11038 18.1197 6.11038C17.4489 6.99997 17.2593 7.94059 17.7187 8.93955C18.1708 9.93122 18.9947 10.4198 20.0812 10.4927C20.1249 11.3093 20.4312 11.9948 21.0656 12.5125C21.5614 12.9135 22.1374 13.1104 22.7864 13.0958C23.8364 13.0739 25.2072 12.3229 25.3531 10.4854C25.4479 10.4781 25.5426 10.4708 25.6739 10.4635C25.6083 10.9083 25.5499 11.3239 25.4843 11.7396C25.251 13.2416 25.0249 14.7364 24.7843 16.2385C24.5145 17.952 23.0926 19.1916 21.3572 19.1989C18.1781 19.2135 15.0062 19.2135 11.827 19.1989C10.1135 19.1916 8.69889 17.9812 8.40723 16.2896C7.76556 12.5854 7.13118 8.87393 6.48952 5.16976C6.40202 4.63747 6.07389 4.36038 5.52702 4.36038C4.58639 4.36038 3.65306 4.36038 2.71243 4.36038C2.1291 4.36038 1.73535 4.00309 1.73535 3.49268C1.73535 2.97497 2.1291 2.61768 2.70514 2.61768C3.65306 2.61768 4.60098 2.61768 5.5416 2.61768C6.84681 2.62497 7.85306 3.41247 8.17389 4.68851C8.30514 5.15518 8.42181 5.61455 8.54577 6.11038Z" fill="#007AFF"/>
<path d="M21.8389 6.98525C21.8389 6.38004 21.8316 5.7967 21.8389 5.22066C21.8462 4.73212 22.2399 4.36025 22.7212 4.36754C23.1878 4.37483 23.567 4.73941 23.5816 5.22066C23.5889 5.51962 23.5816 5.81858 23.5816 6.11754C23.5816 6.39462 23.5816 6.679 23.5816 6.98525C24.1795 6.98525 24.7628 6.97795 25.3389 6.98525C25.7472 6.99254 26.068 7.25504 26.1701 7.64879C26.2649 8.00608 26.1191 8.40712 25.7837 8.58941C25.6232 8.67691 25.4264 8.72066 25.2441 8.72795C24.6972 8.74254 24.1576 8.73525 23.5743 8.73525C23.5743 9.18733 23.5743 9.61754 23.5743 10.0477C23.5743 10.1936 23.5816 10.3394 23.5743 10.4852C23.5597 10.9738 23.1805 11.353 22.7066 11.353C22.2326 11.353 21.8462 10.9738 21.8316 10.4852C21.8243 9.9165 21.8316 9.34045 21.8316 8.72795C21.3941 8.72795 20.9712 8.72795 20.5482 8.72795C20.3878 8.72795 20.2201 8.73525 20.0597 8.72795C19.5857 8.70608 19.2139 8.32691 19.2139 7.86025C19.2139 7.38629 19.5784 6.99254 20.0743 6.98525C20.6503 6.97795 21.2191 6.98525 21.8389 6.98525Z" fill="#007AFF"/>
<path d="M14.8458 22.2759C14.8458 23.479 13.8541 24.4561 12.651 24.4561C11.4479 24.4488 10.4708 23.4645 10.4781 22.254C10.4854 21.0655 11.4624 20.0884 12.6583 20.0884C13.8687 20.0811 14.8531 21.0655 14.8458 22.2759Z" fill="#007AFF"/>
<path d="M22.7136 22.2905C22.7063 23.4936 21.7074 24.4634 20.5042 24.4488C19.3011 24.4343 18.3386 23.4426 18.3532 22.2322C18.3678 21.0436 19.3521 20.0811 20.5553 20.0884C21.7511 20.0884 22.7209 21.0801 22.7136 22.2905Z" fill="#007AFF"/>
</svg>`,
    inactive: `<svg width="27" height="24" viewBox="0 0 27 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.53038 6.52844C8.66898 7.44471 8.79987 8.33018 8.93847 9.22336C9.20026 10.9404 9.46205 12.6575 9.73924 14.3745C9.94714 15.6912 11.0713 16.669 12.4111 16.669C15.2523 16.6767 18.1012 16.6767 20.9424 16.669C22.3284 16.6613 23.4294 15.6604 23.6373 14.259C23.7066 13.7816 23.7759 13.3119 23.8683 12.8346C23.9607 12.3187 24.4227 11.9876 24.9155 12.0646C25.4006 12.1493 25.7394 12.5805 25.6778 13.0886C25.6008 13.6892 25.5238 14.2898 25.4006 14.8827C25.1465 16.0685 24.5074 17.0078 23.5141 17.7085C23.4679 17.7393 23.4217 17.7701 23.3755 17.8086C23.3601 17.8163 23.3524 17.8394 23.3447 17.8548C24.5074 19.3717 24.1532 21.1426 23.1831 22.1513C22.1667 23.2061 20.5497 23.4602 19.2639 22.7365C17.8163 21.9203 17.3466 20.4881 17.8933 18.5324C17.0848 18.5324 16.2841 18.5324 15.4602 18.5324C15.8452 19.4333 15.876 20.3418 15.4679 21.235C15.1676 21.8972 14.6902 22.3977 14.0511 22.7365C12.7807 23.4217 11.2099 23.1676 10.2089 22.1282C9.09246 20.9655 9.03086 19.5411 10.0241 17.8625C9.70844 17.5853 9.36965 17.3235 9.07706 17.0232C8.33788 16.2533 8.01449 15.2985 7.8451 14.259C7.24452 10.7248 6.62853 7.19062 6.01255 3.65642C5.92016 3.12514 5.57367 2.84025 5.02698 2.84025C4.02601 2.84025 3.02504 2.84025 2.03177 2.84025C1.42349 2.84025 1 2.44756 1 1.91627C1.0077 1.36959 1.42349 1 2.03947 1C3.04044 1 4.04141 1 5.03468 1C6.39754 1.0077 7.45241 1.82388 7.7912 3.13284C7.899 3.54093 8.00679 3.94901 8.09149 4.3648C8.13769 4.61119 8.23779 4.69589 8.50728 4.69589C10.7633 4.68049 13.0193 4.68819 15.2831 4.68819C15.4063 4.68819 15.5372 4.68819 15.6527 4.71129C16.107 4.81139 16.4149 5.22718 16.3764 5.68146C16.3379 6.13575 15.9684 6.49764 15.5064 6.52844C15.4217 6.53614 15.337 6.52844 15.2446 6.52844C13.1194 6.52844 11.002 6.52844 8.87687 6.52844C8.76137 6.52844 8.65358 6.52844 8.53038 6.52844ZM13.8971 19.9106C13.8971 19.133 13.2811 18.517 12.5112 18.517C11.7566 18.517 11.1406 19.1407 11.1329 19.8875C11.1252 20.6498 11.7566 21.2812 12.5266 21.2812C13.2811 21.2889 13.8971 20.6729 13.8971 19.9106ZM22.2052 19.9183C22.2052 19.1407 21.5969 18.5247 20.8269 18.5247C20.0723 18.5247 19.4564 19.1407 19.441 19.8952C19.4333 20.6575 20.0646 21.2889 20.8269 21.2889C21.5815 21.2889 22.1975 20.6729 22.2052 19.9183Z" fill="#999999" stroke="#F9FBFC" stroke-width="0.5"/>
<path d="M21.9049 4.68829C21.9049 4.07231 21.9049 3.49483 21.9049 2.92504C21.9049 2.33986 22.2899 1.92407 22.8288 1.92407C23.3601 1.92407 23.7451 2.33986 23.7528 2.92504C23.7528 3.47943 23.7528 4.04151 23.7528 4.59589C23.7528 4.61129 23.7605 4.63439 23.7759 4.69599C24.0146 4.69599 24.2533 4.69599 24.4997 4.69599C24.8385 4.69599 25.1696 4.69599 25.5084 4.69599C26.0935 4.69599 26.5093 5.08098 26.517 5.61226C26.5247 6.15895 26.1013 6.53624 25.493 6.54394C24.9463 6.54394 24.3996 6.54394 23.8529 6.54394C23.8375 6.54394 23.8144 6.55164 23.7528 6.55934C23.7528 6.67483 23.7528 6.79033 23.7528 6.91353C23.7528 7.40631 23.7605 7.8914 23.7528 8.38418C23.7451 8.91547 23.3293 9.32355 22.8211 9.31585C22.3207 9.30815 21.9203 8.90777 21.9126 8.38418C21.9049 7.7836 21.9126 7.18302 21.9126 6.54394C21.2812 6.54394 20.6806 6.55164 20.08 6.54394C19.3639 6.52854 18.9251 5.82016 19.2485 5.20418C19.4255 4.86539 19.7181 4.70369 20.0954 4.70369C20.6806 4.68829 21.2735 4.68829 21.9049 4.68829Z" fill="#999999"/>
</svg>`
  },
  Wishlist: {
    active: `<svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.6349 21.35L9.94782 19.8142C3.95586 14.3807 0 10.7855 0 6.39918C0 2.80401 2.81564 0 6.39918 0C8.42365 0 10.3667 0.942425 11.6349 2.42005C12.9031 0.942425 14.8461 0 16.8706 0C20.4541 0 23.2698 2.80401 23.2698 6.39918C23.2698 10.7855 19.3139 14.3807 13.3219 19.8142L11.6349 21.35Z" fill="#007AFF"/>
</svg>`,
    inactive: `<svg width="24" height="21" viewBox="0 0 24 21" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.9316 2.78376C12.2628 2.4525 12.5278 2.15438 12.826 1.85625C14.7472 0.100616 16.9997 -0.396262 19.451 0.431868C21.8691 1.26 23.3267 3.01563 23.7573 5.56627C24.0885 7.71941 23.4923 9.60755 21.9685 11.1644C19.2523 13.9138 16.5029 16.6301 13.7535 19.3795C12.7266 20.4064 11.1697 20.4395 10.1428 19.3795C7.36031 16.597 4.54467 13.8807 1.8284 11.0319C0.00651652 9.14379 -0.424111 6.85815 0.404019 4.40689C1.23215 1.98875 2.98778 0.531243 5.5053 0.100616C7.69156 -0.263761 9.5797 0.365617 11.1697 1.9225C11.4016 2.25375 11.6666 2.51875 11.9316 2.78376ZM6.53218 1.525C6.06843 1.59125 5.60467 1.62437 5.17405 1.75688C1.46403 2.75063 0.238393 7.42128 2.98778 10.1707C5.70405 12.9201 8.42032 15.6032 11.1697 18.3526C11.6335 18.8163 12.2628 18.8163 12.7597 18.3526C15.5091 15.6363 18.2254 12.8869 20.9748 10.1375C22.1673 8.91192 22.631 7.42128 22.3329 5.76502C22.0016 3.87689 20.9416 2.55188 19.1198 1.88938C17.2979 1.22687 15.5754 1.525 14.0847 2.78376C13.5547 3.24751 13.0578 3.77751 12.561 4.27439C12.1635 4.63877 11.766 4.63877 11.4016 4.27439C11.0041 3.87689 10.6066 3.44626 10.176 3.04876C9.14907 2.08813 7.92344 1.59125 6.53218 1.525Z" fill="#999999"/>
</svg>`
  },
  Alerts: {
    active: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" stroke="#007AFF" stroke-width="2"/>
    </svg>`,
    inactive: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" stroke="#999999" stroke-width="2"/>
    </svg>`
  },
  Me: {
    active: `<svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.21828 0C9.61475 0.0886838 10.0269 0.140851 10.4129 0.266051C12.7083 1.0016 14.2367 3.26043 14.0542 5.60794C13.8559 8.10674 12.0614 10.0786 9.63562 10.4751C6.64124 10.9603 3.85552 8.82664 3.54774 5.80096C3.2556 2.93178 5.3475 0.339085 8.21146 0.0365168C8.26363 0.0313002 8.31058 0.0156501 8.36275 0C8.64445 0 8.93136 0 9.21828 0Z" fill="#007AFF"/>
<path d="M8.785 19.9956C6.09319 19.9956 3.39616 19.9956 0.704346 19.9956C0.208761 19.9956 -0.00512364 19.7713 9.30499e-05 19.2757C0.0470433 15.5718 2.78581 12.4001 6.45836 11.8054C6.79223 11.7532 7.13131 11.7271 7.4704 11.7219C8.3155 11.7115 9.1606 11.7115 10.0057 11.7167C13.407 11.748 16.4014 14.0694 17.2934 17.3507C17.4656 17.9871 17.5595 18.634 17.5699 19.2965C17.5751 19.766 17.3508 19.9956 16.8865 19.9956C14.1843 19.9956 11.4872 19.9956 8.785 19.9956Z" fill="#007AFF"/>
</svg>`,
    inactive: `<svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.2122 0C9.60865 0.0886802 10.0208 0.140845 10.4068 0.266041C12.702 1.00156 14.2305 3.2603 14.0479 5.60772C13.8497 8.1012 12.0552 10.0782 9.62952 10.4747C6.63525 10.9598 3.85487 8.82629 3.54188 5.80073C3.24976 2.93166 5.34157 0.339071 8.20542 0.0365154C8.25758 0.0312989 8.30453 0.0156495 8.35669 0C8.63838 0 8.92529 0 9.2122 0ZM8.78966 1.17371C6.53092 1.16849 4.6895 3.00469 4.68429 5.25822C4.67907 7.51695 6.51006 9.36359 8.76358 9.36881C11.0275 9.37924 12.8794 7.53782 12.8794 5.27387C12.8794 3.01513 11.0432 1.17371 8.78966 1.17371Z" fill="#999999"/>
<path d="M8.769 19.9947C6.08773 19.9947 3.40646 19.9947 0.730401 19.9947C0.208752 19.9947 -0.00512348 19.7808 9.30024e-05 19.2644C0.0522578 15.6076 2.73875 12.4621 6.35377 11.8309C6.71892 11.7683 7.08929 11.7318 7.45967 11.7266C8.32038 11.7109 9.17589 11.6953 10.0366 11.7266C13.0622 11.8309 15.274 13.2654 16.7189 15.905C17.298 16.9691 17.5536 18.1272 17.5692 19.3322C17.5744 19.76 17.3397 19.9999 16.9119 19.9999C14.1941 19.9947 11.4816 19.9947 8.769 19.9947ZM16.3799 18.8106C16.3277 18.5132 16.2912 18.2367 16.2338 17.9603C15.6339 15.0912 13.01 12.9211 10.0783 12.8846C9.20719 12.8742 8.33603 12.869 7.46488 12.8898C7.06843 12.9003 6.66676 12.9368 6.28596 13.0307C3.79769 13.6254 2.1858 15.1747 1.42419 17.6055C1.30421 17.9916 1.25727 18.3984 1.16859 18.8106C6.25987 18.8106 11.299 18.8106 16.3799 18.8106Z" fill="#999999"/>
</svg>`
  }
};

const AppsTabNavigation = () => {
  const route = useRoute();
  const navigation = useNavigation();
  
  // Get the currently focused route name
  const focusedRouteName = getFocusedRouteNameFromRoute(route) ?? 'Apps';
  const isShopActive = focusedRouteName === 'Shop';

  // Function to handle cart navigation
  const handleCartPress = () => {
    navigation.navigate('Cart', { fromShop: true });  // Add a flag to indicate we came from Shop
  };

  // Function to handle wishlist navigation
  const handleWishlistPress = () => {
    navigation.navigate('Wishlist', { fromShop: true });  // Add a flag to indicate we came from Shop
  };

  return (
    <Tab.Navigator
      screenOptions={({ route }) => ({
        tabBarIcon: ({ focused }) => {
          const iconXml = focused ? icons[route.name].active : icons[route.name].inactive;
          return (
            <View style={styles.tabItem}>
              <SvgXml xml={iconXml} width={24} height={24} />
            </View>
          );
        },
        tabBarActiveTintColor: '#007AFF',
        tabBarInactiveTintColor: '#999999',
        tabBarStyle: {
          ...styles.tabBar,
          display: route.name === 'Cart' ? 'none' : 'flex',
        },
        tabBarItemStyle: styles.tabBarItem,
        tabBarShowLabel: true,
      })}
      initialRouteName="Apps"
      backBehavior="history"  // This will help maintain navigation history
    >
      <Tab.Screen 
        name="Apps" 
        component={ServicesScreen} 
        options={{ headerShown: false }} 
      />
      <Tab.Screen 
        name="Shop" 
        component={Ecommerce} 
        options={{ 
          headerShown: false,
          unmountOnBlur: false // Keep the Shop screen mounted
        }} 
      />
      
      {/* Show Cart and Wishlist when Shop is active */}
      {isShopActive && (
        <>
          <Tab.Screen 
            name="Cart" 
            component={Cart} 
            options={{ 
              headerShown: false,
              tabBarButton: (props) => (
                <TouchableOpacity
                  {...props}
                  onPress={handleCartPress}
                />
              ),
              unmountOnBlur: false // Keep the Cart screen mounted
            }} 
          />
          <Tab.Screen 
            name="Wishlist" 
            component={Wishlist} 
            options={{ 
              headerShown: false,
              tabBarButton: (props) => (
                <TouchableOpacity
                  {...props}
                  onPress={handleWishlistPress}
                />
              ),
              unmountOnBlur: false // Keep the Wishlist screen mounted
            }} 
          />
        </>
      )}
      
      {/* Show Alerts only when Shop is not active */}
      {!isShopActive && (
        <Tab.Screen 
          name="Alerts" 
          component={BrainBox} 
          options={{ headerShown: false }} 
        />
      )}
      
      <Tab.Screen 
        name="Me" 
        component={Profile} 
        options={{ headerShown: false }} 
      />
    </Tab.Navigator>
  );
};

const styles = StyleSheet.create({
  tabBar: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    height: 60,
    backgroundColor: 'rgba(255, 255, 255, 0.95)',
    borderTopWidth: 0.222,
    borderTopColor: 'rgba(0, 0, 0, 0.3)',
    backdropFilter: 'blur(25px)',
  },
  tabBarItem: {
    height: 50,
    paddingTop: 8,
  },
  tabItem: {
    alignItems: 'center',
  },
});

export default AppsTabNavigation;
